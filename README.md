# Данный проект представляет собой API интерфейс для взаимодействия с моделью по классификации отзывов.

### Про данные
#### В качестве датасета был выбран датасет: https://www.kaggle.com/datasets/theovall/phonereviews

#### Предобработка

##### Для начала отзывы фильтровались готовой моделью по анализу тональности текста: https://huggingface.co/Tatyana/rubert-base-cased-sentiment-new

##### После этого текст отзыва токенизировался. При этом текст очищался от любых небуквенных символов.

### Модель
#### В проекте использовалась связка TfidfVectorizer + LogisticRegression

### Метрики качества модели
#### Кроме банальной метрики accuracy была выбрана F-мера, так как на одинаково важно правильно классифицировать отзывы обоих классов.

#### Вот результаты:
| Accuracy | F-мера |
| --- | --- |
| 0.8820088626292467 | 0.922377269016986 |



### Про URL
 - #### ```GET /docs``` - Здесь находится Swagger
 - #### ```GET /``` - Форма для отправки отзыва на классификацию
 - #### ```GET /data``` - Получение среза (регулируется query-параметрами page[size] и page[number]) датасета.
 - #### ```POST /comment``` - Отправка комментария на бэкенд для классификации. Вернет класс отзыва.


###  Про расположение файлов

 - #### ```notebooks/``` - Здесь находятся скрипт для фильтрации, предобработки данных, а также для обучения модели.
 - #### ```data/``` - Здесь находятся данные в формате csv, которые являются результатами работы и входными данными для скриптов в notebook/. (В репозиторий файлы не поместились, поэтому они были положены прямиком на сервер).
 - #### ```objects/``` - Здесь находятся дампы модели и векторизатора. Отсюда API их импортирует и использует у себя.
 - #### ```src/``` - Здесь лежит код API сервера.
 - #### ```nginx/``` - В данной директории находится конфигурация для Nginx. Используется для развёртывания API на сервере.
 - #### ```postgres/``` - В данной директории находится файл создания схема для БД Postgres (он не поместился в репозиторий, поэтому лежит прямо на сервере).

### Запуск
Собираем образ
```shell
docker build . -t model_app
```

Переходим в нужную директорию
```shell
cd ./src
```

Запускаем проект
```shell
docker-compose up -d
```
